<VirtualHost *:80>
    ServerName omeusitio.lan

    DocumentRoot /opt/web/omeusitio.lan/htdocs

    <Directory /opt/web/omeusitio.lan/htdocs>
        Require all granted

        # Configurar .htaccess
        AllowOverride AuthConfig FileInfo Nonfatal=Override

        # Habilitar directory listing
        # DirectoryIndex disabled
        Options Indexes
    </Directory>


    <Directory /opt/web/omeusitio.lan/htdocs/datos>
        # AllowOverride AuthConfig
        # Files y Filesmatch no tienen un Override, solo ALL
        AllowOverride AuthConfig Nonfatal=Override
    </Directory>

    <Directory /opt/web/omeusitio.lan/htdocs/imaxes>
        # AllowOverride AuthConfig
        # Files y Filesmatch no tienen un Override, solo ALL
        AllowOverrideList Files FilesMatch Nonfatal=Override
    </Directory>

    # Configurar autenticación Basic
    <Directory /opt/web/omeusitio.lan/htdocs/traballadores>
        # Indicar el tipo de autenticación
        # Módulo tipo de autenticación: mod_auth_basic
        AuthType Basic

        # Mensaje que aparecerá en el prompt de autenticación del navegador 
        AuthName "Restricted Files"

        # Indicar el método que se emplea para almacenar las contraseñas
        # Módulo proveedor de autenticación: mod_auth_basic
        AuthBasicProvider file

        # Indicar el fichero donde están almacenadas las contraseñas
        AuthUserFile /usr/local/apache/passwd/passwords

        # Indicar que usuarios pueden autenticarse. Tienen que existir
        # en el AuthUserFile
        # Módulo: mod_authz_user
        Require user ana
        Require user eva
    </Directory>

    # Configurar autenticación Digest
    # Módulo tipo de autenticación: mod_auth_digest
    <Directory /opt/web/omeusitio.lan/htdocs/directivos>
        AuthType Digest
        AuthName "directivos"
        AuthDigestProvider file
        AuthUserFile /opt/web/omeusitio.lan/.htdigestpasswords

        Require user xan
    </Directory>

    # Configurar autenticación basic en un fichero .htaccess 
    <Directory /opt/web/omeusitio.lan/contas>
        AllowOverride AuthConfig
    </Directory>
</VirtualHost>